<!DOCTYPE html><html><head><meta charset="UTF-8"><link rel="shortcut icon" href="favicon.ico"><title>Rollocontrol</title><style>@-webkit-viewport{width:device-width;zoom:1.0;}@-moz-viewport{width:device-width;zoom:1.0;}@-ms-viewport{width:device-width;zoom:1.0;}@-o-viewport{width:device-width;zoom:1.0;}@viewport{width:device-width;zoom:1.0;}*,*:before,*:after{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block;}[hidden],template{display:none;}html,body{min-height:100%;}html{overflow-y:scroll;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%;}::-moz-selection{background:#b3d4fc;text-shadow:none;}::selection{background:#b3d4fc;text-shadow:none;}::selection:window-inactive{background:#dedede;}img::selection{background:transparent;}img::-moz-selection{background:transparent;}a{background:transparent;color:#1fa3ec;}a:hover{text-decoration:none;}a:active,a:hover{outline:0;}a:focus{outline:thin dotted;}html{font-size:100%;}@media only screen and(min-width:320px){html{font-size:81.25%;}}@media only screen and(min-width:480px){html{font-size:87.5%;}}@media only screen and(min-width:640px){html{font-size:100%;}}@media only screen and(min-width:960px){html{font-size:112.5%;}}@media only screen and(min-width:1440px){html{font-size:125%;}}body{margin:0;color:#444;font-size:1rem;font-family:"Helvetica Neue",Arial,sans-serif;line-height:1.5;}.ui-mobile-viewport{margin:0;overflow-x:visible;-webkit-text-size-adjust:100%;-ms-text-size-adjust:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}body.ui-mobile-viewport,div.ui-mobile-viewport{overflow-x:hidden}.ui-mobile[data-role=page],.ui-mobile[data-role=dialog],.ui-page{top:0;left:0;width:100%;min-height:100%;position:absolute;display:none;border:0}.ui-mobile .ui-page-active{display:block;overflow:visible}.ui-page{outline:none;opacity:70}.in{-webkit-animation-timing-function:ease-out;-webkit-animation-duration:350ms;-moz-animation-timing-function:ease-out;-moz-animation-duration:350ms}.out{-webkit-animation-timing-function:ease-in;-webkit-animation-duration:225ms;-moz-animation-timing-function:ease-in;-moz-animation-duration:225ms}abbr,acronym,dfn[title]{cursor:help;}abbr[title]{border-bottom:1px dotted;}abbr a{text-decoration:none;}acronym{text-transform:uppercase;}b,strong{font-weight:700;}blockquote{padding-left:1rem;border-left:5px solid #e5e5e5;font-style:italic;font-family:Baskerville,"Baskerville Old Face","Hoefler Text",Garamond,"Times New Roman",serif;}blockquote p{margin:0;}blockquote p+p{margin-top:1rem;}blockquote footer:before{content:"\2014 \2009";}blockquote footer{color:#777;font-style:italic;font-size:0.8125rem;}blockquote,dl,figure,hr,menu,ol,p,pre,summary,table,ul{margin:0 0 1rem;}caption,p,table,textarea,td,th{-ms-word-break:break-all;word-break:break-all;word-break:break-word;-webkit-hyphens:auto;-moz-hyphens:auto;-ms-hyphens:auto;hyphens:auto;}dl dt{color:#222;font-weight:700;}dl dd{margin:0;}del{color:#777;text-decoration:line-through;}details{cursor:pointer;}dfn{font-style:italic;}em,i,cite{font-style:italic;}h1,h2,h3,h4,h5,h6{margin:0 0 0.75rem;color:#222;font-weight:700;font-family:"Helvetica Neue",Arial,sans-serif;line-height:1.333;text-rendering:optimizeLegibility;}h1{font-size:3.157rem;}h2{font-size:2.369rem;}h3{font-size:1.777rem;}h4{font-size:1.333rem;}h5{font-size:1rem;}h6{font-size:0.75rem;}hr{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;height:0;border:0;border-bottom:1px solid #dedede;}ins,mark{background:#ff9;color:#222;text-decoration:none;}nav ul,nav ol{margin:0;padding:0;list-style:none;}ol{list-style:decimal;}ol ol{list-style:upper-alpha;}ol ol ol{list-style:lower-roman;}ol ol ol ol{list-style:lower-alpha;}ol ol,ol ul,ul ul,ul ol{margin-bottom:0;}q{quotes:"\201C" "\201D" "\2018" "\2019";}small{display:inline-block;font-size:87.5%;line-height:1.333;}sub,sup{position:relative;vertical-align:baseline;font-size:75%;line-height:0;}sup{top:-0.5em;}sub{bottom:-0.25em;}code,kbd,pre,samp{color:#444;font-family:Monaco,"Lucida Sans Typewriter",Consolas,"Courier New",monospace;}code,kbd{font-size:75%;}code{padding:0 0.3rem;border:1px solid #dedede;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;background:#f8f8f8;white-space:nowrap;}@media only screen and(min-width:480px){code{padding:0.1rem 0.3rem;}}kbd{position:relative;top:-1px;margin-bottom:1px;padding:0 0.3rem;border:1px solid #dedede;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#f8f8f8;-webkit-box-shadow:0 1px 0 #dedede,inset 0 0 0 1px #fff;-moz-box-shadow:0 1px 0 #dedede,inset 0 0 0 1px #fff;box-shadow:0 1px 0 #dedede,inset 0 0 0 1px #fff;white-space:nowrap;}@media only screen and(min-width:480px){kbd{padding:0.1rem 0.3rem;}}pre{position:relative;overflow:auto;padding:1rem;background:#222;-webkit-box-shadow:inset 0 0 5px hsla(0,0%,0%,0.6);-moz-box-shadow:inset 0 0 5px hsla(0,0%,0%,0.6);box-shadow:inset 0 0 5px hsla(0,0%,0%,0.6);color:#ccc;white-space:pre;word-wrap:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;hyphens:none;-ms-hyphens:none;}pre code{display:block;overflow:auto;margin:0;padding:0;height:100%;border:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;background:transparent;color:inherit;white-space:pre;}audio,canvas,video{display:inline-block;}audio,video{width:100%;}audio:not([controls]){display:none;height:0;}figcaption{margin-top:0.563rem;font-style:italic;font-size:75%;}img{border:0;vertical-align:middle;}img,video{max-width:100%;width:auto\9;height:auto!important;}svg:not(:root){overflow:hidden;}button,input,select,textarea{margin:0;font-size:1rem;font-family:inherit;}button,input{line-height:normal;}button,select{text-transform:none;}button,html input[type="button"],input[type="reset"],input[type="submit"]{cursor:pointer;-webkit-appearance:button;}button[disabled],html input[disabled]{cursor:default;}fieldset{margin:0;padding:0;border:0;}input,select,textarea{display:block;padding:0.563rem;width:100%;border:1px solid #aaa;-webkit-border-radius:0.356rem;-moz-border-radius:0.356rem;border-radius:0.356rem;vertical-align:middle;line-height:1.5;}input[type="checkbox"],input[type="image"],input[type="radio"]{display:inline-block;width:auto;cursor:pointer;}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;margin:0 0.422rem 0.238rem 0;padding:0;}input[type="search"]{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;-webkit-appearance:textfield;}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none;}input[type="button"],input[type="reset"],input[type="submit"]{display:inline-block;width:auto;}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0;}label{cursor:pointer;}legend{margin:0 0 1rem;padding:0;border:0;color:#222;font-weight:700;}textarea{overflow:auto;vertical-align:top;resize:vertical;}table{max-width:100%;width:100%;border-spacing:0;border-collapse:collapse;empty-cells:show;}caption{font-weight:700;font-style:italic;padding-bottom:0.317rem;}table th,table tfoot td{color:#222;text-align:left;font-weight:700;}table thead th,table tfoot td{background-color:#efefef;}table th,table td{overflow:visible;padding:0.633rem;vertical-align:top;}.table_border{border:1px solid #dedede;}.table_border_cells th,.table_border_cells td{border-top:1px solid #dedede;border-left:1px solid #dedede;}.table_border_rows th,.table_border_rows td{border-top:1px solid #dedede;}.table_border.table_border_cells thead:first-child tr:first-child th,.table_border.table_border_cells thead:first-child tr:first-child td,.table_border.table_border_rows thead:first-child tr:first-child th,.table_border.table_border_rows thead:first-child tr:first-child td{border-top:0;}.table_border_cells tr th:first-child,.table_border_cells tr td:first-child{border-left:0;}.table_border_cells tr:first-child th,.table_border_cells thead:first-child tr:first-child th{border-top:0;}.table_border_rows tr:last-child td{border-bottom:1px solid #dedede;}.table_stripes tbody>tr:nth-child(odd)>td{background-color:#f8f8f8;}.strip{margin:0;padding:0;width:100%;background-color:#efefef;list-style:none;}.strip .wrapper{padding:1rem 0;}.wrapper{margin:0 auto;max-width:1140px;width:90%;}.well{margin:0 0 1rem;padding:1rem;background:#efefef;-webkit-box-shadow:inset 0 0 8px hsla(0,0%,0%,0.15);-moz-box-shadow:inset 0 0 8px hsla(0,0%,0%,0.15);box-shadow:inset 0 0 8px hsla(0,0%,0%,0.15);}.well .well{background:#dedede;}.grid{margin:0;margin-left:-2rem;padding:0;list-style:none;font-size:0;}.grid-item{display:inline-block;padding-left:2rem;vertical-align:top;font-size:1rem;}.grid-item,.one_whole{width:100%;}.one_half{width:50%;}.one_third{width:33.333%;}.two_thirds{width:66.666%;}.one_fourth{width:25%;}.two_fourths{width:50%;}.three_fourths{width:75%;}.one_fifth{width:20%;}.two_fifths{width:40%;}.three_fifths{width:60%;}.four_fifths{width:80%;}.one_sixth{width:16.666%;}.two_sixths{width:33.333%;}.three_sixths{width:50%;}.four_sixths{width:66.666%;}.five_sixths{width:83.333%;}.width_auto{width:auto;}.button{display:inline-block;margin:0;padding:0.563rem 0.844rem;border:0 none;background:#dedede;color:#444;text-align:center;text-decoration:none;font-size:1rem;line-height:1.5;cursor:pointer;}.button:active{-webkit-box-shadow:inset 0 3px 6px hsla(0,0%,0%,0.20);-moz-box-shadow:inset 0 3px 6px hsla(0,0%,0%,0.20);box-shadow:inset 0 3px 6px hsla(0,0%,0%,0.20);}.button:focus{outline:thin dotted #444;outline:5px auto-webkit-focus-ring-color;outline-offset:-2px;}.button.button_hollow{background:transparent;-webkit-box-shadow:inset 0 0 0 3px hsla(0,0%,92%,1.0);-moz-box-shadow:inset 0 0 0 3px hsla(0,0%,92%,1.0);box-shadow:inset 0 0 0 3px hsla(0,0%,92%,1.0);}.button.button_hollow:active{background:#efefef;-webkit-box-shadow:inset 0 0 6px hsla(0,0%,0%,0.20);-moz-box-shadow:inset 0 0 6px hsla(0,0%,0%,0.20);box-shadow:inset 0 0 6px hsla(0,0%,0%,0.20);}.button.button_chunky{-webkit-box-shadow:inset 0-2px 0 hsla(0,0%,0%,0.12);-moz-box-shadow:inset 0-2px 0 hsla(0,0%,0%,0.12);box-shadow:inset 0-2px 0 hsla(0,0%,0%,0.12);}.button.button_chunky:active{-webkit-box-shadow:inset 0 2px 3px hsla(0,0%,0%,0.2);-moz-box-shadow:inset 0 2px 3px hsla(0,0%,0%,0.2);box-shadow:inset 0 2px 3px hsla(0,0%,0%,0.2);}.button.button_mini{padding:0.238rem 0.563rem;font-size:0.8125rem;}@media only screen and(min-width:640px){.button.button_mini{font-size:0.75rem;}}.button.button_small{padding:0.317rem 0.75rem;font-size:0.875rem;}.button.button_large,.button.button_block{padding:1rem 1.333rem;font-size:1.125rem;line-height:1.333;}.button.button_block{display:block;}.button.button_rounded{-webkit-border-radius:0.356rem;-moz-border-radius:0.356rem;border-radius:0.356rem;}.button.button_pill{-webkit-border-radius:9999rem;-moz-border-radius:9999rem;border-radius:9999rem;}.button.button_disabled,.button.button_disabled:active,.button[disabled]{background:#ddd!important;-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important;color:#777!important;text-shadow:none!important;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=65)";opacity:0.65;cursor:not-allowed!important;}.button.button_hollow.button_disabled,.button.button_hollow.button_disabled:active,.button.button_hollow[disabled]{background:transparent!important;-webkit-box-shadow:inset 0 0 0 3px #ddd!important;-moz-box-shadow:inset 0 0 0 3px #ddd!important;box-shadow:inset 0 0 0 3px #ddd!important;}.font_huge,.font_xxl{line-height:1.333!important;}.font_huge{font-size:4.209rem!important;}.font_xxl{font-size:3.157rem!important;}.font_xl{font-size:2.369rem!important;}.font_large{font-size:1.777rem!important;}.font_medium{font-size:1.333rem!important;}.font_regular{font-size:1rem!important;}.font_small{font-size:0.75rem!important;}.font_ultralight{font-weight:100;}.font_light{font-weight:300;}.font_normal{font-weight:400;}.font_semibold{font-weight:600;}.font_bold{font-weight:700;}.font_black{font-weight:900;}.font_muted{color:#777;}.text_left{text-align:left!important;}.text_center{text-align:center!important;}.text_right{text-align:right!important;}.text_justify{text-align:justify!important;}.visuallyhidden.focusable:active,.visuallyhidden.focusable:focus{position:static;overflow:visible;clip:auto;margin:0;width:auto;height:auto;}.invisible{visibility:hidden;}.clear{display:block;visibility:hidden;clear:both;overflow:hidden;width:0;height:0;}.cf:before,.cf:after{display:table;content:" ";}.cf:after{clear:both;}</style></head><body id="top" style><script type="text/javascript">function getCurSecOfDay(){var d=new Date();return d.getHours()*3600+d.getMinutes()*60+d.getSeconds();}function getCurWeekDay(){var d=new Date().getDay();if(d==0)return 6;else return d-1;}function secOfDay2String(sod){var h=Math.floor(sod/3600),min=Math.floor((sod%3600)/60),sec=sod%60;if(h<10){h="0"+h;}if(min<10){min="0"+min;}if(sec<10){sec="0"+sec;}return h+":"+min+":"+sec;}function nameOfDay(day){if(day<7&&day>=0)return['Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag','Sonntag'][day];return 'Fehler';}function recursiveList(obj){var t="<ul>";for(i in obj){t+="<li>"+i;if(obj[i]instanceof Object){t+=recursiveList(obj[i]);}else{t+=" = "+obj[i];}t+="</li>";}t+="</ul>";return t;}function ajax(urlVars,callback){var httpRequest=new XMLHttpRequest();httpRequest.onreadystatechange=function(){if(httpRequest.readyState===4){if(httpRequest.status===200){callback(httpRequest.responseText);}}};httpRequest.open('GET',"/ajax.cgi"+urlVars);httpRequest.send();}var myJson;function stellen(){ajax('?cmd=setTime&sod='+getCurSecOfDay()+'&weekDay='+getCurWeekDay(),updateJson);}function newEditTimeEvent(){showEditTimeEvent("new");}function showEditTimeEvent(id){var tim,sod=0;if(id!=="new"&&id<=myJson.timeEvents.length&&id>=0){tim=myJson.timeEvents[id];sod=tim.secoundOfDay;EditTitle.innerHTML="Bearbeite Timer";}else{tim={"days":0,"outputs":0,"name":"Neuer Timer"};EditTitle.innerHTML="Neuen Timer erstellen";}EditName.value=tim.name;EditHour.value=Math.floor(sod/3600);EditMin.value=Math.floor((sod%3600)/60);EditPage.style.display="block";if(tim.event=='hoch')myForm.richtung[0].checked=true;else myForm.richtung[1].checked=true;var t="";timerId.text=id;for(var x=0;x<7;x++){t+='<tr><td class="text_right"><input type="checkbox" value="'+x+'" class="font_large" '+((tim.days&(1<<x))?"checked":"")+' name="days">'+'</td><td class="text_left">'+nameOfDay(x)+'</td></tr>';}daysCheck.innerHTML=t;t="";for(var x=0;x<myJson.outputs.length;x++){var out=myJson.outputs[x];t+='<tr><td class="text_right"><input type="checkbox" value="'+x+'" class="font_large" '+((tim.out&(1<<x))?"checked":"")+' name="outputs">'+'</td><td class="text_left">'+out.name+'</td></tr>';}outCheck.innerHTML=t;}function getTimerList(timerEvents){var t='<table class="table_border table_border_cells table_stripes">';for(x in timerEvents){var tage='';var elm=timerEvents[x];if(elm.days==(1|2|4|8|16))tage="Montag - Freitag";else{for(var i=0;i<7;i++){if(elm.days&(1<<i)){if(tage!='')tage+=', ';tage+=nameOfDay(i);}}}t+='<tr><td>'+((elm.event=='hoch')?'&#x25B2;':'&#x25BC;')+'</td><td><a href="javascript:showEditTimeEvent('+x+')">'+elm.name+'</a></td><td>'+tage+'</td><td>'+secOfDay2String(elm.secoundOfDay)+'</td></tr>';}return t+'</table><div class="text_center"><a href="javascript:newEditTimeEvent()" class="button button_rounded button_chunky button_primary font_xl">&nbsp;+&nbsp;</a></div>';}function getOutputList(outputs){var t='<table class="table_border table_border_cells table_stripes">';for(x in outputs){var elm=outputs[x];t+='<tr><td>'+elm.name+'</td><td>'+elm.maxTime/100+' s</td><td>'+elm.state+'</td><td>'+'<a href="javascript:ajax('+"'?cmd=up&out="+(1<<x)+"'"+', updateJson)"+" class="button button_rounded button_chunky button_primary font_large">&#x25B2;</a>&nbsp&nbsp'+'<a href="javascript:ajax('+"'?cmd=down&out="+(1<<x)+"'"+', updateJson)"+" class="button button_rounded button_chunky button_primary font_large">&#x25BC;</a></td></tr>';}return t+'</table>';}function saveTimer(){var newOutputs=0,newDays=0;for(var x=0;x<7;x++){if(myForm.days[x].checked)newDays|=(1<<x);}for(var x=0;x<myJson.outputs.length;x++){if(myForm.outputs[x].checked)newOutputs|=(1<<x);}var newEvent=myForm.richtung[0].checked?'hoch':'runter';var newSod=EditHour.value*60*60+EditMin.value*60;var newName="";newName="&name="+EditName.value;ajax("?cmd=timer&id="+timerId.text+"&out="+newOutputs+"&days="+newDays+"&sod="+newSod+newName+"&event="+newEvent,updateJson);hide();}function hide(){EditPage.style.display="none";}function delTimer(){ajax("?cmd=delTimer&id="+timerId.text,updateJson);hide();}function updateJson(resp){myJson=JSON.parse(resp);var myClock=document.getElementById("Clock");var myJSONView=document.getElementById("JSON-View");myClock.innerHTML="<h4>"+nameOfDay(myJson.time.weekDay)+"  "+secOfDay2String(myJson.time.secoundsOfDay)+"</h4>";TimeEvents.innerHTML=getTimerList(myJson.timeEvents);Outputs.innerHTML=getOutputList(myJson.outputs);}setInterval(function(){ajax('',updateJson);},1000);</script><div class="content" role="content"><header class="text_center well" role="header"><h1 class="masthead-title font_light">Rolladensteuerung</h1></header><div class="grid text_center"><div id="Clock" class="grid-item one_fourth font_large"></div><div class="grid-item one_fourth"><a href="javascript:stellen()" class="button button_rounded button_chunky button_primary font_large">Stellen</a></div></div><br><div class="grid text_center"><div class="grid-item one_fourth"><a href="javascript:ajax('?cmd=up&out=1023', updateJson)" class="button button_rounded button_chunky button_primary font_large">&#x25B2;Alle</a></div><div class="grid-item one_fourth"><a href="javascript:ajax('?cmd=down&out=1023', updateJson)" class="button button_rounded button_chunky button_primary font_large">&#x25BC;Alle</a></div></div><br><h2 class="well text_center">Timer</h2><div id="TimeEvents" class="wrapper font_large"></div><p/><h2 class="text_center well">Rollostatus</h2><div id="Outputs" class="text_center wrapper font_large"></div><!--Berarbeitungs div--><div id="EditPage" class="ui-page well out in"><form name="myForm"><div class="header text_center"><h1 id="EditTitle" class="font_light"></h1></div><br><div class="grid text_center"><div class="grid-item one_third font_large text_right">Name</div><div class="grid-item one_third"><input id="EditName" type="text"></div></div><br><div class="grid text_center"><div class="grid-item one_third font_large text_right">Zeit</div><div class="grid-item one_third text_left"><span><input id="EditHour" style="width:25%;display:inline-block;'" type="number">&nbsp;<input id="EditMin" style="width:25%;display:inline-block;'" type="number"></span></div></div><br><input id="timerId" type="hidden"><div class="text_center"><label class="font_large"><input type="radio" value='hoch' name="richtung">&#x25B2;</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<label class="font_large"><input type="radio" value='runter' name="richtung">&#x25BC;</label></div><div class="grid text_center"><div class="grid-item one_half"><table class="font_large" id="daysCheck"></table></div><div class="grid-item one_half"><table class="font_large" id="outCheck"></table></div></div><br><div class="grid text_center"><div class="grid-item one_fourth"><a href="javascript:delTimer()" class="button button_rounded button_chunky button_primary font_large">Entfernen</a></div><div class="grid-item one_fourth"><a href="javascript:hide()" class="button button_rounded button_chunky button_primary font_large">Abbrechen</a></div><div class="grid-item one_fourth"><a href="javascript:saveTimer()" class="button button_rounded button_chunky button_primary font_large">Speichern</a></div></div></form></div></div></html>